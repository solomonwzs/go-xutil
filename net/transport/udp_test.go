package transport

import (
	"fmt"
	"testing"

	"github.com/solomonwzs/goxutil/net/network"
)

func TestChecksum(t *testing.T) {
	ipRaw := []byte{
		0x45, 0x00, 0x00, 0x2b, 0x7a, 0x8f, 0x00, 0x00,
		0x40, 0x11, 0x79, 0xf2, 0xc0, 0xa8, 0xc5, 0x98,
		0xff, 0xff, 0xff, 0xff,
	}
	ipH, _ := network.IPv4HeaderUnmarshal(ipRaw)

	u := &Udp{
		IpH:     ipH,
		SrcPort: 9999,
		DstPort: 10000,
		Length:  23,
		Data: []byte{
			0x56, 0x53, 0x54, 0x41, 0x52, 0x43, 0x41, 0x4d,
			0x51, 0x55, 0x45, 0x52, 0x59, 0x2c, 0x30,
		},
	}
	u.Marshal()
	fmt.Printf("%x\n", u.Checksum)
}
